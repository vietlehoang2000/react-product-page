{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { act } from \"react-dom/cjs/react-dom-test-utils.production.min\";\nimport { AiFillMedicineBox } from \"react-icons/ai\";\nimport ReduxThunk from \"redux-thunk\";\nconst initialState = {\n  userName: \"\",\n  passWord: \"\",\n  logInStatus: false\n};\nconst url = \"https://fake-rest-api-nodejs.herokuapp.com/login\";\nconst data = {\n  username: admin,\n  password: admin\n};\nexport const fetchUserById = createAsyncThunk(\"authenticate/cookies\", async (userId, thunkAPI) => {\n  const response = await fetch(`${url}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  });\n\n  if (response.status === 200) {\n    const data = await response.json();\n    const total = response.headers.get(\"X-Total-Count\");\n    return {\n      data,\n      total\n    };\n  } else {\n    return response.status + \":\" + response.statusText;\n  }\n});\nexport const authenticateSlide = createSlice({\n  name: \"authentication\",\n  initialState,\n  reducers: {//without async call\n    // getAccount: (state,action) => {\n    //   if(action.payload[0]!==''&&action.payload[1]!==''){\n    //   state.userName = action.payload[0];\n    //   state.passWord = action.payload[1];\n    //   }\n    //   else{\n    //     console.log('wrong')\n    //   }\n    //   console.log(state.userName,state.passWord)\n    // },\n    // checkAccount: (state,action) => {\n    //   if(action.payload[0]===state.userName&&action.payload[1]===state.passWord){\n    //       state.logInStatus=true;\n    //   }\n    // },\n  },\n  extraReducers: builder => {\n    // Add reducers for additional action types here, and handle loading state as needed\n    builder.addCase(fetchUserById.fulfilled, (state, action) => {\n      // Add user to the state array\n      console.log(action.payload.data);\n      state.userName = action.payload;\n    });\n  }\n}); // Action creators are generated for each case reducer function\n\nexport const {\n  getAccount,\n  checkAccount\n} = authenticateSlide.actions;\nexport default authenticateSlide.reducer;","map":{"version":3,"sources":["/Users/vietle/Documents/Techmaster/React/B8/product-page/src/components/authentication/authenticateSlide.js"],"names":["createSlice","createAsyncThunk","act","AiFillMedicineBox","ReduxThunk","initialState","userName","passWord","logInStatus","url","data","username","admin","password","fetchUserById","userId","thunkAPI","response","fetch","method","headers","body","JSON","stringify","status","json","total","get","statusText","authenticateSlide","name","reducers","extraReducers","builder","addCase","fulfilled","state","action","console","log","payload","getAccount","checkAccount","actions","reducer"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,gBAAtB,QAA8C,kBAA9C;AACA,SAASC,GAAT,QAAoB,mDAApB;AACA,SAASC,iBAAT,QAAkC,gBAAlC;AAEA,OAAOC,UAAP,MAAuB,aAAvB;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,QAAQ,EAAE,EADS;AAEnBC,EAAAA,QAAQ,EAAE,EAFS;AAGnBC,EAAAA,WAAW,EAAE;AAHM,CAArB;AAMA,MAAMC,GAAG,GAAG,kDAAZ;AAEA,MAAMC,IAAI,GAAG;AAAEC,EAAAA,QAAQ,EAAEC,KAAZ;AAAmBC,EAAAA,QAAQ,EAAED;AAA7B,CAAb;AAEA,OAAO,MAAME,aAAa,GAAGb,gBAAgB,CAC3C,sBAD2C,EAE3C,OAAOc,MAAP,EAAeC,QAAf,KAA4B;AAC1B,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAET,GAAI,EAAR,EAAW;AACrCU,IAAAA,MAAM,EAAE,MAD6B;AAErCC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAF4B;AAKrCC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeb,IAAf;AAL+B,GAAX,CAA5B;;AAOA,MAAIO,QAAQ,CAACO,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,UAAMd,IAAI,GAAG,MAAMO,QAAQ,CAACQ,IAAT,EAAnB;AACA,UAAMC,KAAK,GAAGT,QAAQ,CAACG,OAAT,CAAiBO,GAAjB,CAAqB,eAArB,CAAd;AACA,WAAO;AAAEjB,MAAAA,IAAF;AAAQgB,MAAAA;AAAR,KAAP;AACD,GAJD,MAIO;AACL,WAAOT,QAAQ,CAACO,MAAT,GAAkB,GAAlB,GAAwBP,QAAQ,CAACW,UAAxC;AACD;AACF,CAjB0C,CAAtC;AAoBP,OAAO,MAAMC,iBAAiB,GAAG7B,WAAW,CAAC;AAC3C8B,EAAAA,IAAI,EAAE,gBADqC;AAE3CzB,EAAAA,YAF2C;AAG3C0B,EAAAA,QAAQ,EAAE,CACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBQ,GAHiC;AAqB3CC,EAAAA,aAAa,EAAGC,OAAD,IAAa;AAC1B;AACAA,IAAAA,OAAO,CAACC,OAAR,CAAgBpB,aAAa,CAACqB,SAA9B,EAAyC,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAC1D;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACG,OAAP,CAAe9B,IAA3B;AACA0B,MAAAA,KAAK,CAAC9B,QAAN,GAAiB+B,MAAM,CAACG,OAAxB;AACD,KAJD;AAKD;AA5B0C,CAAD,CAArC,C,CA+BP;;AACA,OAAO,MAAM;AAAEC,EAAAA,UAAF;AAAcC,EAAAA;AAAd,IAA+Bb,iBAAiB,CAACc,OAAvD;AAEP,eAAed,iBAAiB,CAACe,OAAjC","sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { act } from \"react-dom/cjs/react-dom-test-utils.production.min\";\nimport { AiFillMedicineBox } from \"react-icons/ai\";\n\nimport ReduxThunk from \"redux-thunk\";\n\nconst initialState = {\n  userName: \"\",\n  passWord: \"\",\n  logInStatus: false,\n};\n\nconst url = \"https://fake-rest-api-nodejs.herokuapp.com/login\";\n\nconst data = { username: admin, password: admin };\n\nexport const fetchUserById = createAsyncThunk(\n  \"authenticate/cookies\",\n  async (userId, thunkAPI) => {\n    const response = await fetch(`${url}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    });\n    if (response.status === 200) {\n      const data = await response.json();\n      const total = response.headers.get(\"X-Total-Count\");\n      return { data, total };\n    } else {\n      return response.status + \":\" + response.statusText;\n    }\n  }\n);\n\nexport const authenticateSlide = createSlice({\n  name: \"authentication\",\n  initialState,\n  reducers: {\n    //without async call\n    // getAccount: (state,action) => {\n    //   if(action.payload[0]!==''&&action.payload[1]!==''){\n    //   state.userName = action.payload[0];\n    //   state.passWord = action.payload[1];\n    //   }\n    //   else{\n    //     console.log('wrong')\n    //   }\n    //   console.log(state.userName,state.passWord)\n    // },\n    // checkAccount: (state,action) => {\n    //   if(action.payload[0]===state.userName&&action.payload[1]===state.passWord){\n    //       state.logInStatus=true;\n    //   }\n    // },\n  },\n  extraReducers: (builder) => {\n    // Add reducers for additional action types here, and handle loading state as needed\n    builder.addCase(fetchUserById.fulfilled, (state, action) => {\n      // Add user to the state array\n      console.log(action.payload.data);\n      state.userName = action.payload;\n    });\n  },\n});\n\n// Action creators are generated for each case reducer function\nexport const { getAccount, checkAccount } = authenticateSlide.actions;\n\nexport default authenticateSlide.reducer;\n"]},"metadata":{},"sourceType":"module"}